import React, { useState } from 'react';
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Card, CardContent } from "@/components/ui/card"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from "@/components/ui/dialog"
import { Home, Calendar, Folder, User, VideoCall, MessageCircle, Hospital, Shield, Gift, Pill, Search, SupportAgent, Menu, X } from 'lucide-react';

export default function ArogyaKannada() {
  const [currentPage, setCurrentPage] = useState('home');
  const [isChatbotOpen, setIsChatbotOpen] = useState(false);
  const [chatMessages, setChatMessages] = useState<string[]>([]);
  const [menuOpen, setMenuOpen] = useState(false);

  const changePage = (page: string) => {
    setCurrentPage(page);
    setMenuOpen(false);
  };

  const toggleChatbot = () => {
    setIsChatbotOpen(!isChatbotOpen);
  };

  const sendChatMessage = (message: string) => {
    setChatMessages([...chatMessages, message]);
    // Simulate bot response
    setTimeout(() => {
      setChatMessages(prev => [...prev, "ಧನ್ಯವಾದಗಳು. ಆರೋಗ್ಯ ಸಹಾಯಕರು ಶೀಘ್ರದಲ್ಲೇ ಪ್ರತಿಕ್ರಿಯಿಸುತ್ತಾರೆ."]);
    }, 1000);
  };

  return (
    <div className="flex flex-col min-h-screen bg-white text-gray-800">
      {/* Header */}
      <header className="bg-[#4EB1A6] text-white p-4 shadow-md">
        <div className="container mx-auto flex justify-between items-center">
          <h1 className="text-2xl font-bold">ಆರೋಗ್ಯ</h1>
          <div className="hidden md:flex space-x-4">
            <Select>
              <SelectTrigger className="w-[180px] bg-white text-gray-800">
                <SelectValue placeholder="ಸ್ಥಳ ಆಯ್ಕೆಮಾಡಿ" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="bangalore">ಬೆಂಗಳೂರು</SelectItem>
                <SelectItem value="mysore">ಮೈಸೂರು</SelectItem>
                <SelectItem value="hubli">ಹುಬ್ಬಳ್ಳಿ</SelectItem>
              </SelectContent>
            </Select>
            <div className="relative">
              <Input type="text" placeholder="ಹುಡುಕಿ..." className="pl-10" />
              <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400" />
            </div>
          </div>
          <Button variant="outline" size="icon" className="md:hidden" onClick={() => setMenuOpen(!menuOpen)}>
            <Menu />
          </Button>
        </div>
      </header>

      {/* Mobile Menu */}
      {menuOpen && (
        <div className="fixed inset-0 bg-gray-800 bg-opacity-75 z-50">
          <div className="flex flex-col h-full bg-white p-4">
            <div className="flex justify-between items-center mb-4">
              <h2 className="text-xl font-bold">ಮೆನು</h2>
              <Button variant="ghost" size="icon" onClick={() => setMenuOpen(false)}>
                <X />
              </Button>
            </div>
            <nav className="flex flex-col space-y-4">
              <Button variant="ghost" onClick={() => changePage('home')}>ಮುಖಪುಟ</Button>
              <Button variant="ghost" onClick={() => changePage('appointments')}>ಅಪಾಯಿಂಟ್ಮೆಂಟ್‌ಗಳು</Button>
              <Button variant="ghost" onClick={() => changePage('records')}>ದಾಖಲೆಗಳು</Button>
              <Button variant="ghost" onClick={() => changePage('profile')}>ಪ್ರೊಫೈಲ್</Button>
            </nav>
          </div>
        </div>
      )}

      {/* Main Content */}
      <main className="flex-grow">
        {currentPage === 'home' && (
          <div>
            <section className="bg-[#4EB1A6] text-white py-20 px-4 text-center relative overflow-hidden">
              <div className="container mx-auto relative z-10">
                <h2 className="text-4xl font-bold mb-4">ನಾವು ಉತ್ತಮ ಆರೋಗ್ಯ ಸೇವೆ ಒದಗಿಸುತ್ತೇವೆ</h2>
                <p className="text-xl mb-8">ಗ್ರಾಮೀಣ ಸಮುದಾಯಗಳಿಗೆ ಗುಣಮಟ್ಟದ ಆರೋಗ್ಯ ಸೇವೆಗಳನ್ನು ಸಂಪರ್ಕಿಸುವುದು</p>
                <Button variant="secondary" size="lg">ಇನ್ನಷ್ಟು ತಿಳಿಯಿರಿ</Button>
              </div>
              <div className="absolute bottom-0 left-0 w-full h-16 bg-white" style={{clipPath: 'ellipse(60% 100% at 50% 100%)'}}></div>
            </section>

            <section className="py-16 px-4">
              <div className="container mx-auto">
                <h3 className="text-2xl font-bold mb-8 text-center">ನಮ್ಮ ಸೇವೆಗಳು</h3>
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                  <Card>
                    <CardContent className="p-6 flex flex-col items-center text-center">
                      <VideoCall className="w-12 h-12 text-[#4EB1A6] mb-4" />
                      <h4 className="text-xl font-semibold mb-2">ವೀಡಿಯೋ ಸಮಾಲೋಚನೆ</h4>
                      <p>ವೈದ್ಯರೊಂದಿಗೆ ತಕ್ಷಣವೇ ಸಂಪರ್ಕ ಸಾಧಿಸಿ</p>
                    </CardContent>
                  </Card>
                  <Card>
                    <CardContent className="p-6 flex flex-col items-center text-center">
                      <MessageCircle className="w-12 h-12 text-[#4EB1A6] mb-4" />
                      <h4 className="text-xl font-semibold mb-2">ವೈದ್ಯರೊಂದಿಗೆ ಚಾಟ್</h4>
                      <p>24/7 ವೈದ್ಯಕೀಯ ಸಹಾಯ</p>
                    </CardContent>
                  </Card>
                  <Card>
                    <CardContent className="p-6 flex flex-col items-center text-center">
                      <Hospital className="w-12 h-12 text-[#4EB1A6] mb-4" />
                      <h4 className="text-xl font-semibold mb-2">ಹತ್ತಿರದ ಕ್ಲಿನಿಕ್ ಹುಡುಕಿ</h4>
                      <p>ಆರೋಗ್ಯ ಕೇಂದ್ರಗಳನ್ನು ಪತ್ತೆಹಚ್ಚಿ</p>
                    </CardContent>
                  </Card>
                  <Card>
                    <CardContent className="p-6 flex flex-col items-center text-center">
                      <Shield className="w-12 h-12 text-[#4EB1A6] mb-4" />
                      <h4 className="text-xl font-semibold mb-2">ವಿಮೆ</h4>
                      <p>ಆರೋಗ್ಯ ರಕ್ಷಣೆ ಯೋಜನೆಗಳು</p>
                    </CardContent>
                  </Card>
                  <Card>
                    <CardContent className="p-6 flex flex-col items-center text-center">
                      <Gift className="w-12 h-12 text-[#4EB1A6] mb-4" />
                      <h4 className="text-xl font-semibold mb-2">ಸರ್ಕಾರಿ ಯೋಜನೆಗಳು</h4>
                      <p>ಆರೋಗ್ಯ ಪ್ರಯೋಜನಗಳು</p>
                    </CardContent>
                  </Card>
                  <Card>
                    <CardContent className="p-6 flex flex-col items-center text-center">
                      <Pill className="w-12 h-12 text-[#4EB1A6] mb-4" />
                      <h4 className="text-xl font-semibold mb-2">ಔಷಧಿ ಅಂಗಡಿಗಳು</h4>
                      <p>ಹತ್ತಿರದ ಔಷಧಿಗಳನ್ನು ಹುಡುಕಿ</p>
                    </CardContent>
                  </Card>
                </div>
              </div>
            </section>
          </div>
        )}

        {currentPage === 'appointments' && (
          <div className="container mx-auto py-8 px-4">
            <h2 className="text-2xl font-bold mb-4">ನಿಮ್ಮ ಅಪಾಯಿಂಟ್ಮೆಂಟ್‌ಗಳು</h2>
            <p>ಇಲ್ಲಿ ನಿಮ್ಮ ಅಪಾಯಿಂಟ್ಮೆಂಟ್‌ಗಳ ಪಟ್ಟಿ ಇರುತ್ತದೆ.</p>
          </div>
        )}

        {currentPage === 'records' && (
          <div className="container mx-auto py-8 px-4">
            <h2 className="text-2xl font-bold mb-4">ವೈದ್ಯಕೀಯ ದಾಖಲೆಗಳು</h2>
            <p>ಇಲ್ಲಿ ನಿಮ್ಮ ವೈದ್ಯಕೀಯ ದಾಖಲೆಗಳು ಮತ್ತು ಇತಿಹಾಸ ಇರುತ್ತದೆ.</p>
          </div>
        )}

        {currentPage === 'profile' && (
          <div className="container mx-auto py-8 px-4">
            <h2 className="text-2xl font-bold mb-4">ನಿಮ್ಮ ಪ್ರೊಫೈಲ್</h2>
            <p>ಇಲ್ಲಿ ನಿಮ್ಮ ವೈಯಕ್ತಿಕ ಮಾಹಿತಿ ಮತ್ತು ಸೆಟ್ಟಿಂಗ್‌ಗಳು ಇರುತ್ತವೆ.</p>
          </div>
        )}
      </main>

      {/* Footer Navigation */}
      <nav className="bg-white border-t border-gray-200 fixed bottom-0 w-full">
        <div className="container mx-auto px-4">
          <div className="flex justify-around py-2">
            <Button variant="ghost" className="flex flex-col items-center" onClick={() => changePage('home')}>
              <Home className="h-6 w-6" />
              <span className="text-xs mt-1">ಮುಖಪುಟ</span>
            </Button>
            <Button variant="ghost" className="flex flex-col items-center" onClick={() => changePage('appointments')}>
              <Calendar className="h-6 w-6" />
              <span className="text-xs mt-1">ಅಪಾಯಿಂಟ್ಮೆಂಟ್‌ಗಳು</span>
            </Button>
            <Button variant="ghost" className="flex flex-col items-center" onClick={() => changePage('records')}>
              <Folder className="h-6 w-6" />
              <span className="text-xs mt-1">ದಾಖಲೆಗಳು</span>
            </Button>
            <Button variant="ghost" className="flex flex-col items-center" onClick={() => changePage('profile')}>
              <User className="h-6 w-6" />
              <span className="text-xs mt-1">ಪ್ರೊಫೈಲ್</span>
            </Button>
          </div>
        </div>
      </nav>

      {/* SOS Button */}
      <Button variant="destructive" className="fixed top-1/2 right-0 transform -translate-y-1/2 rotate-90 origin-right" onClick={() => alert('ತುರ್ತು ಸೇವೆಗಳಿಗೆ ಕರೆ ಮಾಡಲಾಗುತ್ತಿದೆ. ಸಹಾಯ ಮಾರ್ಗದಲ್ಲಿದೆ.')}>
        ತುರ್ತು SOS
      </Button>

      {/* Chatbot */}
      <Dialog open={isChatbotOpen} onOpenChange={setIsChatbotOpen}>
        <DialogTrigger asChild>
          <Button className="fixed bottom-20 right-4 rounded-full p-0 w-12 h-12 bg-[#4EB1A6]">
            <SupportAgent className="h-6 w-6" />
          </Button>
        </DialogTrigger>
        <DialogContent className="sm:max-w-[425px]">
          <DialogHeader>
            <DialogTitle>ಆರೋಗ್ಯ ಸಹಾಯಕ</DialogTitle>
          </DialogHeader>
          <div className="mt-4 space-y-4">
            <div className="h-[200px] overflow-y-auto border rounded p-2">
              {chatMessages.map((msg, index) => (
                <div key={index} className={`mb-2 ${index % 2 === 0 ? 'text-right' : 'text-left'}`}>
                  <span className={`inline-block p-2 rounded ${index % 2 === 0 ? 'bg-blue-100' : 'bg-gray-100'}`}>
                    {msg}
                  </span>
                </div>
              ))}
            </div>
            <div className="flex gap-2">
              <Input placeholder="ನಿಮ್ಮ ಪ್ರಶ್ನೆಯನ್ನು ಟೈಪ್ ಮಾಡಿ..." />
              <Button onClick={() => sendChatMessage("ನಮಸ್ಕಾರ, ನನಗೆ ಸಹಾಯ ಬೇಕು")}>ಕಳುಹಿಸಿ</Button>
            </div>
          </div>
        </DialogContent>
      </Dialog>
    </div>
  );
}